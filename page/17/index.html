<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Hello world">
<meta name="keywords" content="Front End, Javascript">
<meta property="og:type" content="website">
<meta property="og:title" content="Bale&#39;s Blog">
<meta property="og:url" content="https:&#x2F;&#x2F;zjy7.github.io&#x2F;page&#x2F;17&#x2F;index.html">
<meta property="og:site_name" content="Bale&#39;s Blog">
<meta property="og:description" content="Hello world">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://zjy7.github.io/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Bale's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Bale's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">前端攻城狮</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/03/05/vue-cli-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%B8%8E%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/05/vue-cli-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%B8%8E%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">vue cli 环境变量与模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-05 14:53:32" itemprop="dateCreated datePublished" datetime="2020-03-05T14:53:32+08:00">2020-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Code/" itemprop="url" rel="index">
                    <span itemprop="name">Code</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>在vue-cli3的项目中，<br>npm run serve时会把process.env.NODE_ENV设置为‘development’<br>npm run build 时会把process.env.NODE_ENV设置为‘production’<br>此时只要根据process.env.NODE_ENV设置不同请求url就可以很简单的区分出本地和线上环境。</p>
<h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>package.json添加不同环境下执行的script</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"dev"</span>: <span class="string">"vue-cli-service serve"</span>,</span><br><span class="line">  <span class="string">"serve"</span>: <span class="string">"vue-cli-service serve"</span>,</span><br><span class="line">  <span class="string">"alpha"</span>: <span class="string">"vue-cli-service build --mode alpha"</span>,</span><br><span class="line">  <span class="string">"build"</span>: <span class="string">"vue-cli-service build --mode build"</span>,</span><br><span class="line">  <span class="string">"lint"</span>: <span class="string">"vue-cli-service lint"</span>,</span><br><span class="line">  <span class="string">"test:e2e"</span>: <span class="string">"vue-cli-service test:e2e"</span>,</span><br><span class="line">  <span class="string">"test:unit"</span>: <span class="string">"vue-cli-service test:unit"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在项目根目录添加文件“.env.alpha”，其内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV = &apos;production&apos;</span><br><span class="line">VUE_APP_TITLE = &apos;alpha&apos;</span><br></pre></td></tr></table></figure>
<p>在项目根目录添加文件“.env.build”，其内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV = &apos;production&apos;</span><br><span class="line">VUE_APP_TITLE = &apos;production&apos;</span><br></pre></td></tr></table></figure>

<h2 id="3"><a href="#3" class="headerlink" title="3"></a>3</h2><p>这样在不同生产环境下，实现process.env.VUE_APP_TITLE的不同</p>
<h2 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h2><p>在项目中，也就是src中使用环境变量的话，必须以 <strong>VUE_APP_</strong> 开头。例如我们可以在main.js中直接输出：console.log(process.env.VUE_APP_SECRET)</p>
<p><a href="https://cli.vuejs.org/zh/guide/mode-and-env.html#%E5%9C%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BE%A7%E4%BB%A3%E7%A0%81%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" target="_blank" rel="noopener">参考vue/cli官网</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/02/21/mac-unzip-Illegal-byte-sequence/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/21/mac-unzip-Illegal-byte-sequence/" class="post-title-link" itemprop="url">mac unzip Illegal byte sequence</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-21 09:22:17" itemprop="dateCreated datePublished" datetime="2020-02-21T09:22:17+08:00">2020-02-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>mac解压文件：</p>
<ol>
<li><p>直接双击，即命令行的 open，失败了，报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">无法将&quot;xxx.zip&quot;解压到&quot;xx&quot;</span><br><span class="line">(错误22 - 无效的参数)</span><br></pre></td></tr></table></figure>
</li>
<li><p>命令行unzip，失败，报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   unzip Interface.zip</span><br><span class="line">Archive:  Interface.zip</span><br><span class="line">checkdir error:  cannot create i-�++��+</span><br><span class="line">                 Illegal byte sequence</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 后面两个参数，xxx.zip是文件名， xx为解压后的文件夹名称</span><br><span class="line">ditto -V -x -k --sequesterRsrc --rsrc xxx.ZIP xx</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/02/20/%E7%BE%A4%E4%BD%93%E6%80%A7%E5%AD%A4%E7%8B%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/20/%E7%BE%A4%E4%BD%93%E6%80%A7%E5%AD%A4%E7%8B%AC/" class="post-title-link" itemprop="url">群体性孤独</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-20 14:41:43" itemprop="dateCreated datePublished" datetime="2020-02-20T14:41:43+08:00">2020-02-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="We-remove-ourselves-from-our-grief-or-from-our-revery-and-we-go-into-our-phones-Why-does-this-matter-It-matters-to-me-because-I-think-we’re-setting-ourselves-up-for-trouble-trouble-certainly-in-how-we-relate-to-each-other-but-also-trouble-in-how-we-relate-to-ourselves-and-our-capacity-for-self-reflection"><a href="#We-remove-ourselves-from-our-grief-or-from-our-revery-and-we-go-into-our-phones-Why-does-this-matter-It-matters-to-me-because-I-think-we’re-setting-ourselves-up-for-trouble-trouble-certainly-in-how-we-relate-to-each-other-but-also-trouble-in-how-we-relate-to-ourselves-and-our-capacity-for-self-reflection" class="headerlink" title="We remove ourselves from our grief or from our revery and we go into our phones. Why does this matter? It matters to me, because I think we’re setting ourselves up for trouble, trouble certainly in how we relate to each other, but also trouble in how we relate to ourselves and our capacity for self-reflection."></a>We remove ourselves from our grief or from our revery and we go into our phones. Why does this matter? It matters to me, because I think we’re setting ourselves up for trouble, trouble certainly in how we relate to each other, but also trouble in how we relate to ourselves and our capacity for self-reflection.</h2><h2 id="We’re-getting-used-to-a-new-way-of-being-alone-together-People-want-to-be-with-each-other-but-also-elsewhere-–-connected-to-all-the-different-places-they-want-to-be-People-want-to-customize-their-lives-They-want-to-go-in-and-out-of-all-places-they-are-because-the-thing-that-matters-most-to-them-is-control-over-where-they-put-their-attention-So-you-want-to-go-to-that-board-meeting-but-you-only-want-to-pay-attention-to-the-bits-that-interest-you-And-some-people-think-that’s-a-good-thing"><a href="#We’re-getting-used-to-a-new-way-of-being-alone-together-People-want-to-be-with-each-other-but-also-elsewhere-–-connected-to-all-the-different-places-they-want-to-be-People-want-to-customize-their-lives-They-want-to-go-in-and-out-of-all-places-they-are-because-the-thing-that-matters-most-to-them-is-control-over-where-they-put-their-attention-So-you-want-to-go-to-that-board-meeting-but-you-only-want-to-pay-attention-to-the-bits-that-interest-you-And-some-people-think-that’s-a-good-thing" class="headerlink" title="We’re getting used to a new way of being alone together. People want to be with each other, but also elsewhere – connected to all the different places they want to be. People want to customize their lives. They want to go in and out of all places they are. because the thing that matters most to them is control over where they put their attention.So you want to go to that board meeting, but you  only want to pay attention to the bits that interest you. And some people think that’s a good thing."></a>We’re getting used to a new way of being alone together. People want to be with each other, but also elsewhere – connected to all the different places they want to be. People want to customize their lives. They want to go in and out of all places they are. because the thing that matters most to them is control over where they put their attention.So you want to go to that board meeting, but you  only want to pay attention to the bits that interest you. And some people think that’s a good thing.</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/01/18/%E4%BF%A1%E7%94%A8%E5%8D%A1%E9%A6%96%E5%B9%B4%E6%AC%A1%E5%B9%B4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/18/%E4%BF%A1%E7%94%A8%E5%8D%A1%E9%A6%96%E5%B9%B4%E6%AC%A1%E5%B9%B4/" class="post-title-link" itemprop="url">信用卡首年次年</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-18 17:34:59" itemprop="dateCreated datePublished" datetime="2020-01-18T17:34:59+08:00">2020-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index">
                    <span itemprop="name">Life</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>1、所有银行的信用卡首年都是指卡片核发的12个月内，不是自然年。<br>　　比如：07年12月核发的信用卡，首年至08年11月31日止。<br>2、如果在首年内未激活或未刷够发卡行要求的次数，将在第13个月收取年费。<br>3、在信用卡的有效期内，基本都是延用的这个优惠政策。如果有变动，肯定会通知持卡人的。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/01/10/art-template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/10/art-template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/" class="post-title-link" itemprop="url">art-template模板引擎</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-10 09:10:50" itemprop="dateCreated datePublished" datetime="2020-01-10T09:10:50+08:00">2020-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>分享一个之前用过的模板引擎<a href="https://aui.github.io/art-template/zh-cn/docs/" target="_blank" rel="noopener">art-template</a>。解决的需求是要动态渲染地图上点位信息展示面板Popup、Tooltip。</p>
<h3 id="渲染模板"><a href="#渲染模板" class="headerlink" title="渲染模板"></a>渲染模板</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">'art-template'</span>);</span><br><span class="line"><span class="keyword">var</span> html = template(__dirname + <span class="string">'/tpl-user.art'</span>, &#123;</span><br><span class="line">    user: &#123;</span><br><span class="line">        name: <span class="string">'aui'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="核心方法"><a href="#核心方法" class="headerlink" title="核心方法"></a>核心方法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基于模板名渲染模板</span></span><br><span class="line">template(filename, data);</span><br><span class="line"><span class="comment">// 将模板源代码编译成函数</span></span><br><span class="line">template.compile(source, options);</span><br><span class="line"><span class="comment">// 将模板源代码编译成函数并立刻执行</span></span><br><span class="line">template.render(source, data, options);</span><br></pre></td></tr></table></figure>

<h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">template.helper(&quot;getAlarmType&quot;, function (alarm) &#123;</span><br><span class="line">  if(alarm)&#123;</span><br><span class="line">    if(alarm[0]&amp;&amp;alarm[0].type==&apos;offline&apos;)&#123;</span><br><span class="line">      return &apos;offline&apos;;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      return &apos;alarmvalue&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    return &apos;normalvalue&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const popupLabel = function (data)&#123;</span><br><span class="line">    return  template.compile(</span><br><span class="line">`</span><br><span class="line">  &lt;div class=&quot;event-box shadow gx-box&quot;&gt;</span><br><span class="line">  &lt;table&gt;</span><br><span class="line">    &#123;&#123;if !haslabel&#125;&#125;</span><br><span class="line">    &lt;tr class=&quot;title &#123;&#123;alarm?(offline?&apos;offline&apos;:&apos;tralarm&apos;):&apos;trnormal&apos;&#125;&#125; &#123;&#123;if !alarm&amp;&amp;(!sensors||sensors.length==0||hasdata)&#125;&#125;wtitle&#123;&#123;/if&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;td class=&quot;name&quot; colspan=3&gt;</span><br><span class="line">            &lt;span&gt;&#123;&#123;sname||name&#125;&#125;&lt;span&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &#123;&#123;/if&#125;&#125;</span><br><span class="line">    &#123;&#123;if !hasdata&#125;&#125;</span><br><span class="line">      &#123;&#123;each sensors as s&#125;&#125;</span><br><span class="line">        &lt;tr class=&quot;&#123;&#123;s.alarm?&apos;alarmpopup&apos;:&apos;notalarm&apos;&#125;&#125;&quot;&gt;</span><br><span class="line">            &lt;td class=&quot;name&quot;&gt;&#123;&#123;s.name&#125;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td class=&quot;value &#123;&#123;getAlarmType(s.alarm)&#125;&#125;&quot;&gt;&#123;&#123;s.val==null?&apos;通讯中&apos;:s.val&#125;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td class=&quot;unit &#123;&#123;getAlarmType(s.alarm)&#125;&#125;&quot;&gt;&#123;&#123;s.unit&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &#123;&#123;/each&#125;&#125;</span><br><span class="line">    &#123;&#123;/if&#125;&#125;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">`</span><br><span class="line">    )(data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://www.cnblogs.com/jiqiyoudu/p/4588042.html" target="_blank" rel="noopener">cnblog</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/01/08/%E6%AF%8F%E6%97%A5%E4%B8%80%E5%8F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/08/%E6%AF%8F%E6%97%A5%E4%B8%80%E5%8F%A5/" class="post-title-link" itemprop="url">每日一句</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-08 11:05:06" itemprop="dateCreated datePublished" datetime="2020-01-08T11:05:06+08:00">2020-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Life is struggle.The truth is no matter what comfort surrounds you,it always be an illusion. It can be taken away any time. - Nikita_S01E12</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/01/07/%E6%AF%8F%E6%97%A5%E4%B8%80%E5%8F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/07/%E6%AF%8F%E6%97%A5%E4%B8%80%E5%8F%A5/" class="post-title-link" itemprop="url">每日一句</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-07 08:29:54" itemprop="dateCreated datePublished" datetime="2020-01-07T08:29:54+08:00">2020-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>所有靠物质支撑的幸福感，都不能持久，都会随着物质的离去而离去。只有心灵的淡定宁静，继而产生的身心愉悦，才是幸福的真正源泉。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/01/06/%E6%B8%AF%E7%9C%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/06/%E6%B8%AF%E7%9C%9F/" class="post-title-link" itemprop="url">港真</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-06 15:28:01" itemprop="dateCreated datePublished" datetime="2020-01-06T15:28:01+08:00">2020-01-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="作为运营部最有原则的男人，港真，我觉得自己真的快撑不住了。这段时间终于领悟“梦想总是遥不可及”的感觉，是不是该放弃？放弃究竟是不是一种美丽？"><a href="#作为运营部最有原则的男人，港真，我觉得自己真的快撑不住了。这段时间终于领悟“梦想总是遥不可及”的感觉，是不是该放弃？放弃究竟是不是一种美丽？" class="headerlink" title="作为运营部最有原则的男人，港真，我觉得自己真的快撑不住了。这段时间终于领悟“梦想总是遥不可及”的感觉，是不是该放弃？放弃究竟是不是一种美丽？"></a>作为运营部最有原则的男人，港真，我觉得自己真的快撑不住了。这段时间终于领悟“梦想总是遥不可及”的感觉，是不是该放弃？放弃究竟是不是一种美丽？</h3><h3 id="我的内心很纠结："><a href="#我的内心很纠结：" class="headerlink" title="我的内心很纠结："></a>我的内心很纠结：</h3><h3 id="曾经我是一位跑者，一位像风一样自由的追风少年。"><a href="#曾经我是一位跑者，一位像风一样自由的追风少年。" class="headerlink" title="曾经我是一位跑者，一位像风一样自由的追风少年。"></a>曾经我是一位跑者，一位像风一样自由的追风少年。</h3><h3 id="我喜欢奔跑在山坡上，迎着朝霞灿烂的拥抱；我喜欢飞驰在青青河边，伴着晚风的呢喃；我喜欢驰骋在操场上，享受那挥汗如雨的欢愉……那些轻盈的脚步就像一个集野性与温柔与一身的水嫩姑娘，吸引着我，渐渐地，成为一位放不下脚步的跑者。"><a href="#我喜欢奔跑在山坡上，迎着朝霞灿烂的拥抱；我喜欢飞驰在青青河边，伴着晚风的呢喃；我喜欢驰骋在操场上，享受那挥汗如雨的欢愉……那些轻盈的脚步就像一个集野性与温柔与一身的水嫩姑娘，吸引着我，渐渐地，成为一位放不下脚步的跑者。" class="headerlink" title="我喜欢奔跑在山坡上，迎着朝霞灿烂的拥抱；我喜欢飞驰在青青河边，伴着晚风的呢喃；我喜欢驰骋在操场上，享受那挥汗如雨的欢愉……那些轻盈的脚步就像一个集野性与温柔与一身的水嫩姑娘，吸引着我，渐渐地，成为一位放不下脚步的跑者。"></a>我喜欢奔跑在山坡上，迎着朝霞灿烂的拥抱；我喜欢飞驰在青青河边，伴着晚风的呢喃；我喜欢驰骋在操场上，享受那挥汗如雨的欢愉……那些轻盈的脚步就像一个集野性与温柔与一身的水嫩姑娘，吸引着我，渐渐地，成为一位放不下脚步的跑者。</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2020/01/02/wangeditor%E4%BF%AE%E6%94%B9%E5%9B%BE%E7%89%87%E5%A4%A7%E5%B0%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/02/wangeditor%E4%BF%AE%E6%94%B9%E5%9B%BE%E7%89%87%E5%A4%A7%E5%B0%8F/" class="post-title-link" itemprop="url">wangeditor修改图片大小</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-02 15:57:53" itemprop="dateCreated datePublished" datetime="2020-01-02T15:57:53+08:00">2020-01-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h4><p>实现调整wangeditor编辑器内图片大小，目前不支持修改图片大小</p>
<h4 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h4><p>修改源码<br><a href="https://github.com/wangfupeng1988/wangEditor/issues/1449#issuecomment-503391204" target="_blank" rel="noopener">solution</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zjy7.github.io/2019/12/31/websockt%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Bale">
      <meta itemprop="description" content="Hello world">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/31/websockt%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">websockt简单使用</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-31 15:47:25" itemprop="dateCreated datePublished" datetime="2019-12-31T15:47:25+08:00">2019-12-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-09 16:29:29" itemprop="dateModified" datetime="2021-12-09T16:29:29+08:00">2021-12-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>碰到个需求，项目中预警数量这个数值需要后端实时推送到前端展示。</p>
<p>引入websocket插件<a href="https://github.com/zimv/websocket-heartbeat-js" target="_blank" rel="noopener">websocket-heartbeat-js</a>可以实现该功能。</p>
<h3 id="安装引入WebsocketHeartbeatJs插件"><a href="#安装引入WebsocketHeartbeatJs插件" class="headerlink" title="安装引入WebsocketHeartbeatJs插件"></a>安装引入WebsocketHeartbeatJs插件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i websocket-heartbeat-js -S</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> WebsocketHeartbeatJs <span class="keyword">from</span> <span class="string">'websocket-heartbeat-js'</span></span><br></pre></td></tr></table></figure>

<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">''</span> <span class="comment">// 后端给的url地址</span></span><br><span class="line">_this.ws = <span class="keyword">new</span> WebsocketHeartbeatJs(&#123;</span><br><span class="line">  url: url,</span><br><span class="line">  pingTimeout: <span class="number">50000</span>,</span><br><span class="line">  pongTimeout: <span class="number">10000</span>,</span><br><span class="line">  reconnectTimeout: <span class="number">2000</span>,</span><br><span class="line">  pingMsg: <span class="string">'heartbeat'</span></span><br><span class="line">&#125;)</span><br><span class="line">_this.ws.onopen = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'open success'</span>)</span><br><span class="line">&#125;</span><br><span class="line">_this.ws.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">evt</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 这里处理业务逻辑</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 窗口关闭时，断开websocket的链接</span></span><br><span class="line">_this.ws.onbeforeunload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (_this.ws) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      _this.ws.close()</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">_this.ws.onclose = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'connect onclose'</span>)</span><br><span class="line">&#125;</span><br><span class="line">_this.ws.onerror = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'connect onerror'</span>)</span><br><span class="line">&#125;</span><br><span class="line">_this.ws.onreconnect = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'reconnecting...'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="想到另一个demo"><a href="#想到另一个demo" class="headerlink" title="想到另一个demo"></a>想到另一个demo</h3><p>想起来之前接手了个老项目，后端用.net写的，也要实现ws功能。<br>后来找到个<a href="https://github.com/zjy7/hexoBlog/blob/master/source/_posts/2019-12-31-websockt%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/signalr.js" target="_blank" rel="noopener">signalr</a>插件实现了。</p>
<p>代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'@web/libs/signalr'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> signalR.HubConnectionBuilder()</span><br><span class="line">  .withUrl(<span class="string">`<span class="subst">$&#123;<span class="built_in">window</span>.location.protocol&#125;</span>//<span class="subst">$&#123;<span class="built_in">window</span>.location.host&#125;</span>/messagehub`</span>)</span><br><span class="line">  .build()</span><br><span class="line">c.on(<span class="string">'ReceiveMsg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">message</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// console.log(message)</span></span><br><span class="line">  <span class="comment">// 这里接收数据</span></span><br><span class="line">&#125;)</span><br><span class="line">c.start().catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(err)&#125;)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="Bale"
    src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Bale</p>
  <div class="site-description" itemprop="description">Hello world</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">177</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://xuexinchao.top/" title="http:&#x2F;&#x2F;xuexinchao.top&#x2F;" rel="noopener" target="_blank">尖叫蕈的梦</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        <div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">全站共 10.8k 字</span>
</div>

<span class="post-meta-divider">|</span>

<div class="run_time" style=" text-align:center; display:inline-block;">
  <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
  <script>
    var now = new Date();
    function createtime() {
        var grt= new Date("11/08/2019 15:48:37");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "(*^_^*)本站已运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
    setInterval("createtime()",250);
  </script>
</div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bale</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.5.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

</body>
</html>
